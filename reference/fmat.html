<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The fmat object is the internal dataset used by the outcomerate package.
It holds all definitions for the outcome rates. With the exception of location
rates, these are taken from the AAPOR Standard Definitions (2016)."><title>outcomerate Formula Matrix (Internal Data) — fmat • outcomerate</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="outcomerate Formula Matrix (Internal Data) — fmat"><meta property="og:description" content="The fmat object is the internal dataset used by the outcomerate package.
It holds all definitions for the outcome rates. With the exception of location
rates, these are taken from the AAPOR Standard Definitions (2016)."><meta property="og:image" content="https://docs.ropensci.org/outcomerate/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">outcomerate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro-to-outcomerate.html">Intro to outcomerate</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/outcomerate/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>outcomerate Formula Matrix (Internal Data)</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/outcomerate/blob/HEAD/R/datasets.R" class="external-link"><code>R/datasets.R</code></a></small>
      <div class="d-none name"><code>fmat.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>fmat</code> object is the internal dataset used by the <code>outcomerate</code> package.
It holds all definitions for the outcome rates. With the exception of location
rates, these are taken from the AAPOR Standard Definitions (2016).</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The data is a 3-dimensional binary array consisting of:</p><ul><li><p>outcome: codes I, P, R, NC, O, UH, UO, eUH, eUO, NE</p></li>
<li><p>rate: the shorthand name for the rate (e.g. RR1)</p></li>
<li><p>side: numerator (NUM) and denominator (DEN)</p></li>
</ul><p>Given these three dimensions, each outcome rate can be defined as a rational
number (i.e. a fraction) consisting of a summation of frequencies of
outcome codes (where the matrix entries are nonzero).</p>
<p>The input parameters given by the user are I, P, R, NC, O, UH, UO and
the parameter 'e'. The parameter e is multiplied by UH, UO internally so as to
produce eUH, eUO.</p>
<p>The reason for this implementation is:</p>
<p>a) It conforms to a DRY (don't repeat yourself) philosophy by
holding all definitions in one place. These definitions can be used as upstream
inputs to functions/test suites requiring them.</p>
<p>b) It makes it easier to use intermediate steps in the formula calculations.
For instance, it may be of use to a researchers to want to obtain the
numerator/denominators of calculations, instead of only the output.</p>
<p>c) it makes it easy to compare the output</p>
<p>d) It is easier to maintain</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://www.aapor.org/Standards-Ethics/Standard-Definitions-(1).aspx" class="external-link">https://www.aapor.org/Standards-Ethics/Standard-Definitions-(1).aspx</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fmat</span> <span class="op">&lt;-</span> <span class="fu">outcomerate</span><span class="fu">:::</span><span class="va">fmat</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print the dimensions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">fmat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outcome</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "I"   "P"   "R"   "NC"  "O"   "UH"  "UO"  "NE"  "eUH" "eUO"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "RR1"   "RR2"   "RR3"   "RR4"   "RR5"   "RR6"   "COOP1" "COOP2" "COOP3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "COOP4" "REF1"  "REF2"  "REF3"  "CON1"  "CON2"  "CON3"  "LOC1"  "LOC2" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $side</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NUM" "DEN"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Say we want to know the defintion of Response Rate 2, RR2. We see</span></span></span>
<span class="r-in"><span><span class="co"># below that the numerator (NUM) column is defined by the entries with a 1,</span></span></span>
<span class="r-in"><span><span class="co"># or (I + P). Likewise, the denominator (DEN) is defined as</span></span></span>
<span class="r-in"><span><span class="co"># (I + P + R + NC + O + UH + UO)</span></span></span>
<span class="r-in"><span><span class="va">fmat</span><span class="op">[</span>, <span class="st">"RR2"</span>, <span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        side</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> outcome NUM DEN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     I     1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     P     1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     R     0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     NC    0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     O     0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     UH    0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     UO    0   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     NE    0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     eUH   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     eUO   0   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To use linear algebra, we define a zero-one numerator matrix 'N'</span></span></span>
<span class="r-in"><span><span class="co"># and a zero-one denominator matrix 'D'. Our count of disposition codes</span></span></span>
<span class="r-in"><span><span class="co"># is given here manually as 'x' (in the same order as N and D).</span></span></span>
<span class="r-in"><span><span class="va">N</span> <span class="op">=</span> <span class="va">fmat</span><span class="op">[</span> , , <span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">D</span> <span class="op">=</span> <span class="va">fmat</span><span class="op">[</span> , , <span class="fl">2</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>I <span class="op">=</span> <span class="fl">5</span>, P <span class="op">=</span> <span class="fl">2</span>, R <span class="op">=</span> <span class="fl">1</span>, NC <span class="op">=</span> <span class="fl">7</span>, O <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>      UH <span class="op">=</span> <span class="fl">4</span>, UO <span class="op">=</span> <span class="fl">8</span>,  NE <span class="op">=</span> <span class="fl">1</span>, eUH <span class="op">=</span> <span class="fl">3</span>, eUO <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return all rates</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">N</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">D</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              RR1       RR2       RR3       RR4       RR5       RR6     COOP1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1,] 0.1666667 0.2333333 0.1851852 0.2592593 0.2777778 0.3888889 0.4545455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            COOP2 COOP3 COOP4       REF1       REF2       REF3      CON1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1,] 0.6363636 0.625 0.875 0.03333333 0.03703704 0.05555556 0.3666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             CON2      CON3 LOC1      LOC2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1,] 0.4074074 0.6111111  0.6 0.6666667</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The same thing can be achieved with the apply family of functions</span></span></span>
<span class="r-in"><span><span class="va">numden</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">x</span> <span class="op">*</span> <span class="va">fmat</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="va">sum</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">numden</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">/</span> <span class="va">numden</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        RR1        RR2        RR3        RR4        RR5        RR6      COOP1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.16666667 0.23333333 0.18518519 0.25925926 0.27777778 0.38888889 0.45454545 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      COOP2      COOP3      COOP4       REF1       REF2       REF3       CON1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.63636364 0.62500000 0.87500000 0.03333333 0.03703704 0.05555556 0.36666667 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       CON2       CON3       LOC1       LOC2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.40740741 0.61111111 0.60000000 0.66666667 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

